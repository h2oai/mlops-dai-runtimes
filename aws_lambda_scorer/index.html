


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Nidhi Mehta">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.6">
    
    
      
        <title>AWS Lambda Scorer - Driverless AI Deployment Templates</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.63b94e9e.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.7f672a1f.min.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/mermaid.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#driverless-ai-mojo-pipeline-deployment-template-for-aws-lambda" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Driverless AI Deployment Templates" class="md-header-nav__button md-logo" aria-label="Driverless AI Deployment Templates">
      
  <img src="../img/h2oai.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Driverless AI Deployment Templates
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              AWS Lambda Scorer
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/h2oai/dai-deployment-templates/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    h2oai/dai-deployment-templates
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Driverless AI Deployment Templates" class="md-nav__button md-logo" aria-label="Driverless AI Deployment Templates">
      
  <img src="../img/h2oai.png" alt="logo">

    </a>
    Driverless AI Deployment Templates
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/h2oai/dai-deployment-templates/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    h2oai/dai-deployment-templates
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Driverless AI MOJO Scoring
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Driverless AI MOJO Scoring" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Driverless AI MOJO Scoring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        AWS Lambda Scorer
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="AWS Lambda Scorer" class="md-nav__link md-nav__link--active">
      AWS Lambda Scorer
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-the-lambda-template" class="md-nav__link">
    Building the lambda-template
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pushing-to-aws-using-terraform" class="md-nav__link">
    Pushing to AWS Using Terraform
  </a>
  
    <nav class="md-nav" aria-label="Pushing to AWS Using Terraform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-off-setup" class="md-nav__link">
    One-off Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushing-lambda-to-aws" class="md-nav__link">
    Pushing Lambda to AWS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-prediction" class="md-nav__link">
    Example Prediction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../aws-sagemaker-hosted-scorer/" title="AWS Sagemaker Hosted Scorer" class="md-nav__link">
      AWS Sagemaker Hosted Scorer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gcp/" title="Google Cloud Run Scorer" class="md-nav__link">
      Google Cloud Run Scorer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../local-rest-scorer/" title="Local Rest Server Scorer" class="md-nav__link">
      Local Rest Server Scorer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sql-jdbc-scorer/" title="SQL JDBC Scorer" class="md-nav__link">
      SQL JDBC Scorer
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-the-lambda-template" class="md-nav__link">
    Building the lambda-template
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pushing-to-aws-using-terraform" class="md-nav__link">
    Pushing to AWS Using Terraform
  </a>
  
    <nav class="md-nav" aria-label="Pushing to AWS Using Terraform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#one-off-setup" class="md-nav__link">
    One-off Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pushing-lambda-to-aws" class="md-nav__link">
    Pushing Lambda to AWS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-prediction" class="md-nav__link">
    Example Prediction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/h2oai/dai-deployment-templates/edit/master/docs/aws_lambda_scorer.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="driverless-ai-mojo-pipeline-deployment-template-for-aws-lambda">Driverless AI MOJO pipeline Deployment Template for AWS Lambda<a class="headerlink" href="#driverless-ai-mojo-pipeline-deployment-template-for-aws-lambda" title="Permanent link">&para;</a></h1>
<p>This <a href="https://github.com/h2oai/dai-deployment-templates/tree/master/aws-lambda-scorer">template</a> contains scorer implementation for <code>Driverless AI Model MOJO pipiline</code> with <code>Java runtime</code> on AWS Lambda and can be used to do Real-time scoring on single or multiple rows. The structure is as follows:</p>
<ul>
<li>Source of the generic lambda implementation in: <code>lambda-template</code></li>
<li>Parameterized terraform files for pushing the lambda to AWS in:
  <code>terraform-recipe</code></li>
</ul>
<p>The user needs to provide Driverless AI license key and  model's pipeline.mojo file for scoring. The versions of software used to create the template like mojo runtime are listed <a href="https://github.com/h2oai/dai-deployment-templates/blob/master/gradle.properties">here</a>.</p>
<h2 id="building-the-lambda-template">Building the <code>lambda-template</code><a class="headerlink" href="#building-the-lambda-template" title="Permanent link">&para;</a></h2>
<p>The code of the AWS Lambda scorer is a gradle project build as usual by
<code>./gradlew build</code>. The build result is a Zip archive
<code>lambda-template/build/distributions/lambda-template.zip</code> containing a general
Mojo scorer that can be directly pushed to AWS.</p>
<p>The Scorer relies on the following environment variables:</p>
<ul>
<li><code>DEPLOYMENT_S3_BUCKET_NAME</code>: Name of the AWS S3 bucket storing the Mojo file.</li>
<li><code>MOJO_S3_OBJECT_KEY</code>: Key of Driverless AI model Mojo file (pipeline.mojo) AWS S3 object.</li>
<li><code>DRIVERLESS_AI_LICENSE_KEY</code>: The Driverless license key.</li>
</ul>
<h2 id="pushing-to-aws-using-terraform">Pushing to AWS Using Terraform<a class="headerlink" href="#pushing-to-aws-using-terraform" title="Permanent link">&para;</a></h2>
<p>This deployment template is meant to be used by Driverless AI backend directly,
not by hand. The following describes step necessary to push the lambda by hand,
e.g., for testing purposes.</p>
<h3 id="one-off-setup">One-off Setup<a class="headerlink" href="#one-off-setup" title="Permanent link">&para;</a></h3>
<p>Install terraform <code>0.11.10</code> following steps in:
https://www.terraform.io/downloads.html.</p>
<p>Initialize terraform by running <code>terraform init</code> in the <code>terraform-recipe</code>
folder.
This will download all necessary Terraform plugins, e.g., the AWS one.</p>
<h3 id="pushing-lambda-to-aws">Pushing Lambda to AWS<a class="headerlink" href="#pushing-lambda-to-aws" title="Permanent link">&para;</a></h3>
<p>The Terraform recipe in <code>terraform-recipe</code> relies on a few variables you need
to provide either by hand, from command line, or by setting corresponding
environmental variables (using the prefix <code>TF_VAR_</code>):</p>
<ul>
<li><code>access_key</code>: The access key to your AWS account.</li>
<li><code>secret_key</code>: The secret key to your AWS account.</li>
<li><code>region</code>: AWS region to push to (optional, defaults to <code>us-east-1</code>).</li>
<li><code>lambda_id</code>: Id of the resulting AWS lambda. Keep that unique as it is also
  used to store other fragments, e.g., the Mojo file in S3.</li>
<li><code>lambda_zip_path</code>: Local path to the actual lambda scorer distribution, see
  above (optional, defaults to the relative path to the build Zip archive
  above).</li>
<li><code>mojo_path</code>: Local path to the mojo file to be pushed to S3. You may get one,
  e.g., by running Driverless AI on <code>test/data/iris.csv</code> and asking it to
  create and download the Mojo scoring pipeline in the UI.</li>
<li><code>license_key</code>: Driverless AI license key.</li>
<li><code>bucket_name</code>: Name of AWS S3 bucket to store the mojo to so that the lambda
  can access and load it. Note that the bucket has to already exist and
  the effective AWS account has to have write access to it.</li>
</ul>
<p>Once all the non-optional variables are set, the following command will push
the lambda (or update any changes thereof): <code>terraform apply</code>.</p>
<p>Upon successful push, Terraform will output the URL of the lambda endpoint and
the corresponding <code>api_key</code>.
Note that the recipe sets up AWS API Gateway proxy, see <code>api_gateway.tf</code>.
Look for <code>base_url</code> and <code>api_key</code> in the output.</p>
<pre><code class="text">Outputs:

api_key = DXQtiCbqEY6xjXWP1MMCu4nkDTwRgfdX2qZoKm3e
base_url = https://mslmi91tni.execute-api.us-east-1.amazonaws.com/test
</code></pre>

<h3 id="example-prediction">Example Prediction<a class="headerlink" href="#example-prediction" title="Permanent link">&para;</a></h3>
<p>To test the endpoint, send a request to this URL appended by <code>score</code> and include
the <code>api_key</code> in the request header <code>x-api-key</code>, e.g., as follows.</p>
<pre><code class="bash">$ curl \
    -X POST \
    -H &quot;x-api-key: DXQtiCbqEY6xjXWP1MMCu4nkDTwRgfdX2qZoKm3e&quot; \
    -d @test.json https://mslmi91tni.execute-api.us-east-1.amazonaws.com/test/score
</code></pre>

<p>This expects a file <code>test.json</code> with the actual scoring request payload.
If you are using the mojo trained in <code>test/data/iris.csv</code> as suggested above,
you should be able to use the following json payload:</p>
<pre><code class="json">{
  &quot;fields&quot;: [
    &quot;sepal_len&quot;, &quot;sepal_wid&quot;, &quot;petal_len&quot;, &quot;petal_wid&quot;
  ],
  &quot;includeFieldsInOutput&quot;: [
    &quot;sepal_len&quot;
  ],
  &quot;rows&quot;: [
    [
      &quot;1.0&quot;, &quot;1.0&quot;, &quot;2.2&quot;, &quot;3.5&quot;
    ],
    [
      &quot;3.0&quot;, &quot;10.0&quot;, &quot;2.2&quot;, &quot;3.5&quot;
    ],
    [
      &quot;4.0&quot;, &quot;100.0&quot;, &quot;2.2&quot;, &quot;3.5&quot;
    ]
  ]
}
</code></pre>

<p>The expected response should follow this structure:</p>
<pre><code class="json">{
  &quot;id&quot;: &quot;a12e7390-b8ac-406a-ade9-0d5ea4b63ea9&quot;,
  &quot;fields&quot;: [
    &quot;sepal_len&quot;,
    &quot;class.Iris-setosa&quot;,
    &quot;class.Iris-versicolor&quot;,
    &quot;class.Iris-virginica&quot;
  ],
  &quot;score&quot;: [
    [
      &quot;1.0&quot;,
      &quot;0.6240277982943945&quot;,
      &quot;0.045458571508101536&quot;,
      &quot;0.330513630197504&quot;
    ],
    [
      &quot;3.0&quot;,
      &quot;0.7209441819603676&quot;,
      &quot;0.06299909138586585&quot;,
      &quot;0.21605672665376663&quot;
    ],
    [
      &quot;4.0&quot;,
      &quot;0.7209441819603676&quot;,
      &quot;0.06299909138586585&quot;,
      &quot;0.21605672665376663&quot;
    ]
  ]
}
</code></pre>

<p>Note that including the <code>fields</code> in the response can be disabled by setting <code>noFieldNamesInOutput</code>
to true in the input request.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href=".." title="Overview" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Overview
              </div>
            </div>
          </a>
        
        
          <a href="../aws-sagemaker-hosted-scorer/" title="AWS Sagemaker Hosted Scorer" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                AWS Sagemaker Hosted Scorer
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Â© Copyright 2017-2020 H2O.ai
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d1f5a259.min.js"></script>
      <script src="../assets/javascripts/bundle.d5fec882.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ["navigation.expand"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.fae956e7.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../javascripts/mermaid.min.js"></script>
      
        <script src="../javascripts/nav-expand.js"></script>
      
    
  </body>
</html>